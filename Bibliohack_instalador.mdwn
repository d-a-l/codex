## Instalador de Bibliohack para Ubuntu 18.04 "Bionic Beaver"

### Hacer espacio para el nuevo sistema 

Instalar GParted:

    sudo apt-get install gparted

Redimensionar con GParted:

- Abrir `GParted`, seleccionar la partición a redimensionar y apretar el boton derecho del mouse eligiendo *"Redimensionar/mover"*, luego cambiar el tamaño de la particion hasta liberar 10 o 15GB y luego seleccionar *"Ejecutar las acciones seleccionadas"*. **Nota**: para cambiar el tamaño de una partición, esta debe estar **desmonatada** o no deben haber montadas particiones adyacentes.
- Luego en el espacio libre generado se puede crear una nueva partición `Ext4` con `GParted`, haciendo click con el boton derecho sobre el espacio vacío. Luego de crearla anotar el nombre de sistema la partición (ej `/dev/sd5`)

### Descargar el ISO de ubuntu 18.04.1

    wget http://old-releases.ubuntu.com/releases/18.04.1/ubuntu-18.04-desktop-amd64.iso

### Crear el pendrive booteable:

usar *"Creador de discos de arranque"* o *"Startup Disk Creator"* (en *"Herramientas de Sistema"* -> *"Administración"*), seleccionar el ISO descargado, el pendrive y elegir *"Crear Disco de Arranque"*.

### Instalar Ubuntu 18.04 sin Grub 

**Nota:** algunas veces falla la instalación de Grub de este ISO cuando hay otro sistema instalado. Ademas el escenario para esta instalación es dejar la instalación previa de ubuntu o debian sin alterar (Grub pone como sistema por defecto el nuevo sistema y esto no es lo deseable).

- Desconectar el cable de internet (hace mas rápida la instalación al no descargar paquetes de la red)
- Bootear desde el pendrive (lograr esto a veces requiere modificar el BIOS en la sección orden de arranque)
- Luego de iniciar, el instalador ofrece *"Instalar Ubuntu"* o *"Probar Ubuntu"*, seleccionar *"Probar Ubuntu"*

Una vez abierta la sesión, abrir una terminal y ejecutar el programa de instalación pero sin el instalador de Grub, para esto usar:

     ubiquity -b

Se iniciará el instalador, entonces seleccionar las opciones iniciales de idioma y teclado.

En las siguientes opciones de instalación seleccionar:

- *"Instalacion mínima"* SI
- *"Instalar programas de terceros"* SI

(Un popup preguntará si deseamos desmontar las particiones, responder que NO)

Cuando aparezcan las opciones de instalación en el disco, seleccionar *"otras opciones"*

Se desplegará la lista de particiones, seleccionar la partición creada para alojar esta instalación y darle doble click

En el dialogo que aparece seleccionar:

- utilizar como: *Sistema de ficheros ext4 transaccional*
- Punto de montaje: /
- formatear la particion: *SI*

(Al popup que generalmente aparece con una advertencia de redimensionamiento, responder "Volver")

Luego apretar *"Instalar ahora"* y verificar que la lista de particiones que se muestra a continuación sea correcta (se agregarán automaticamante las areas de intercambio en esta lista)

A continuación indicar el nombre de usuario y sistema. Lo canonico es:

- nombre y nombre de usuario: `bibliohack`
- nombre del equipo: `bibliohack-ubuntu1804`
- contraseña: `bibliohack`

Luego se realiza la instalación que tarda 15 o 20 minutos. Al terminar, reiniciar sacando previamente el pendrive para que inicie del disco.

Como elegimos no instalar grub se iniciará el sistema previamente instalado, para que grub reconozca el nuevo sistema ejecutar:

    sudo update-grub2

luego de reconfigurado (puede tardar unos minutos), reiniciar y elegir en Grub el nuevo Ubuntu 18.04 que ahora aparecera en la lista.

Cuando se desee colocar el nuevo sistema para inciar por defecto en Grub, iniciar en el nuevo sistema, abrir una terminal y ejecutar `sudo update-grub2`, que pone como sistema por defecto el sistema desde donde se lo ejecute.

### Instalar Bibliohack

Iniciar sesion en Ubuntu 18.04, abrir una terminal y descargar el instalador (ATENCION: por ahora sólo funciona en Ubuntu 18.04, y NO en 18.10):

    cd ~
    wget http://bibliohack.org/files/bibliohack_install.tar.gz

descomprimir:

    tar xzvf bibliohack_install.tar.gz

ir a la carpeta:

    cd bibliohack_install

iniciar el instalador:

    sudo bash install

**el instalador instalará todas las apicaciones de bibliohack automaticamente!**

### Escritorio Bibliohack

Los paquetes que hay que instalar son `lightdm` y `gnome-session-flashback`. El nuevo escritorio aparece como una opción para el usuario al iniciar sesión, que toma el escritorio por defecto al ultimo seleccionado.

### Iconos

En gnome flashback: haciendo `Alt` + `click derecho` sobre el panel del escritorio aparece la opcion *"Añadir al panel"*, y añadimos un *"Lanzador de aplicaciones personalizado"*, donde hay que seleccionar:

Para Dalclick:

- Tipo: *Aplicación en Terminal*
- Nombre: *Dalclick*
- Comando: `/opt/bibliohack/dalclick/dalclick`
- En el Icono, hacer click y buscar una cámara

Para Dalproc o Gestor de postproceso:

- Tipo: *Aplicación en Terminal*
- Nombre: *Gestor de Posproceso*
- Comando: `/opt/bibliohack/dalclick/ppm/ppm_daemon.sh`
- En el Icono, hacer click y buscar un engranaje
