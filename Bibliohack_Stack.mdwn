# Bibliohack Stack

Referencia de los componentes:

## Dalclick

Dalclcik es un software escrito en LUA y bash que debe ser cargado por CHDKPTP <https://app.assembla.com/wiki/show/chdkptp>

Dalclick abre una consola que le permite al usuario:

- generar un proyecto de digitalización
- activar y configurar cámaras Canon que tengan instalado CHDK
- descargar capturas desde las cámaras
- aplicar ciertos filtros básicos a las imagenes (resample, rotate, etc)
- mostrar en pantalla las imágenes capturadas
- sobreescribir capturas anteriores
- generar un proyecto scantailor
- generar un "job" de postproceso para su posterior ejecución

Dalclick maneja la mayoría de las funciones desde una interfaz de línea de comandos, pero incluye un módulo con una interfaz gráfica para facilitar el proceso de captura. La interfaz grafica usa las librerias Tecgraf IUP (Portable User Interface) <https://www.tecgraf.puc-rio.br/iup/>, CD (Canvas Draw) <https://www.tecgraf.puc-rio.br/cd/> e IM (toolkit for Digital Imaging) <https://www.tecgraf.puc-rio.br/im/>

Un proyecto dalclick es básicamente un árbol de directorios donde dalclick va guardando las imagenes correspondientes a los diferentes pasos del proceso de captura, y ciertos archivos de configuración en modo texto.

<div class="gallery" markdown="1">

![inicio](/media/img/bibliohack-stack/dalclick-inicio.png)

opciones al inicio, normalmente se presiona \\<enter\\> y se continua con el último proyecto abierto

![inicio](/media/img/bibliohack-stack/dalclick-creacion-proyecto.png)

creacion de un nuevo proyecto

![inicio](/media/img/bibliohack-stack/dalclick-0-menu-captura.png)

opciones de la pantalla de captura

![inicio](/media/img/bibliohack-stack/dalclick-1-opciones-avanzadas.png)

opciones avanzadas

![inicio](/media/img/bibliohack-stack/dalclick-scantailor.png)

opciones para scantailor

![inicio](/media/img/bibliohack-stack/dalclick-explorador.png)

explorador GUI

![inicio](/media/img/bibliohack-stack/dalclick-3-postproceso.png)

opciones de post-proceso

![inicio](/media/img/bibliohack-stack/dalclick-acciones-en-lote.png)

opciones para acciones en lote sobre varios proyectos

![inicio](/media/img/bibliohack-stack/dalclick-opciones-fallo-camara.png)

mensaje cuando falla una o las dos cámaras


</div>

## Dalproc/fcen-tesis

Es un script en bash que procesa un 'job' de postproceso generado por dalclick, utilizando los recursos de postproceso de "fcen-tesis" <https://github.com/Bibliohack/fcen-tesis>. 

El script principal de fcen-tesis es <https://github.com/Bibliohack/fcen-tesis/blob/master/fcen-postprocessing/scripts/fcen-postprocessing>, que aplica a los archivos cuatro instancias de postproceso a partir de una extensa lista de parametros:

- un filtro previo (un script en bash de la carpeta <https://github.com/Bibliohack/fcen-tesis/tree/master/fcen-postprocessing/scripts/filters>)
- scantailor-cli (scantailor via linea de comandos, sin interfaz grafica)
- tesseract ocr
- pdfbeads: genera un pdf a partir de los archivos de scantailor (incluyendo los archivos layers con canales alfa) y agrega los archivos hocr generados por tesseract
